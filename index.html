<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>あなたの鑑定｜数秘＋宿曜 完全統合版</title>
<style>
:root{
  --bg:#0b0f14;--ink:#eaf1ff;--muted:#9fb1cf;--line:#223049;
  --panel:#111826;--panel2:#0c1728;--accent:#22d3ee;--accent2:#34d399;
}
*{box-sizing:border-box}
body{margin:0;background:#05080c;color:var(--ink);font-family:-apple-system,BlinkMacSystemFont,"Yu Gothic",sans-serif;line-height:1.9}
header{padding:26px 16px;text-align:center;background:linear-gradient(180deg,#0a0f13,#0a1320)}
header h1{margin:0 0 6px;font-size:24px}
header p{margin:0;color:var(--muted)}
main{max-width:1120px;margin:0 auto;padding:16px}
.card{background:var(--panel);border:1px solid var(--line);border-radius:14px;padding:18px;margin:14px 0;box-shadow:0 8px 24px rgba(0,0,0,.25)}
label{font-size:13px;color:var(--muted)}
input,select,button{width:100%;padding:10px;border-radius:10px;border:1px solid var(--line);background:#0b1422;color:var(--ink)}
button{cursor:pointer;background:linear-gradient(45deg,var(--accent),var(--accent2));border:none;font-weight:700}
h2{font-size:20px;margin-bottom:10px}
h3{font-size:17px;margin:10px 0 6px}
p{margin:.55em 0}
.small{font-size:12px;color:var(--muted)}
.box{background:var(--panel2);border:1px dashed #264064;padding:12px;border-radius:10px;margin-top:10px}
ul.clean{padding-left:1.3em;margin:0}
ul.clean li{margin:4px 0}
</style>
</head>
<body>
<header>
  <h1>あなたの鑑定｜数秘＋宿曜</h1>
  <p>直感ではなく“納得”で進める自分理解ツール</p>
</header>

<main>
  <div class="card">
    <label>あなたの生年月日</label>
    <input type="date" id="birth"/>
    <label style="margin-top:8px">相手の生年月日（相性を見たい場合）</label>
    <input type="date" id="partner"/>
    <button id="run" style="margin-top:12px">鑑定する</button>
  </div>

  <div id="result"></div>
</main>

<script>
// ===== 数秘・宿曜算出簡易版 =====
const SHUKU=["角木蛟","亢金龍","氐土貉","房日兎","心月狐","尾火虎","箕水豹","斗木獬","女土蝠","虚日鼠","危月燕","室火猪","壁水貐","奎木狼","婁金狗","胃土雉","昴日鵠","畢月烏","觜火猴","参水猿","井木犴","鬼金羊","柳土獐","星日馬","張月鹿","翼火蛇","軫水蚓"];
function lifePath(y,m,d){
  const s=n=>String(n).split("").reduce((a,b)=>a+ +b,0);
  let total=s(y)+s(m)+s(d);
  while(total>9 && ![11,22,33].includes(total)) total=s(total);
  return total;
}
function shukuIdx(date){
  const JD=Math.floor((date/86400000)+2440587.5);
  return JD%27;
}

// ===== データ =====
const ATTRACTION_PATTERNS=[
  "自然体で笑える人","感情を共有してくれる人","静かな優しさのある人","芯がありながら穏やかな人",
  "無理に盛り上げなくても居心地がいい人","直感で通じる人","小さな気配りを見逃さない人",
  "一緒に沈黙を楽しめる人","感情を言葉で説明してくれる人","自分を否定しない人",
  "連絡がマメで安心感をくれる人","生活リズムが似ている人","お金や将来の価値観が近い人",
  "距離を尊重してくれる人","一緒に成長できる人","感性が似ている人","家族を大切にする人",
  "ありがとうを言える人","責任感がある人","感情の波が穏やかな人"
];

const JOBS_MASTER=[
  "教師","保育士","看護師","介護士","臨床心理士","作業療法士","救急救命士","薬剤師",
  "調理師","パティシエ","バリスタ","飲食店経営","ホテルスタッフ","ツアーガイド","ウェディングプランナー",
  "公務員","市役所職員","消防士","警察官","自衛官","郵便局員","図書館司書",
  "エンジニア","データアナリスト","プログラマー","Webデザイナー","グラフィックデザイナー",
  "映像クリエイター","コピーライター","編集者","イラストレーター","写真家",
  "営業職","法人営業","ルート営業","コンサルタント","不動産営業","商社マン","販売員","ショップ店長",
  "経理事務","総務","法務アシスタント","人事採用","秘書","カスタマーサポート","通訳","翻訳家",
  "イベントプランナー","マーケター","SNS運用担当","広告プランナー","ライター","講師","研修トレーナー",
  "大学職員","塾講師","スクールカウンセラー","臨床検査技師","研究職","学芸員","社会福祉士","農業","漁師",
  "建築士","大工","電気工事士","整備士","製造業","倉庫管理","配送ドライバー","タクシー運転手",
  "美容師","ネイリスト","エステティシャン","ファッションスタイリスト","インテリアコーディネーター",
  "ブライダル関係","占い師","ヒーラー","セラピスト","ヨガインストラクター","カメラマン","舞台監督",
  "NPO職員","NGO職員","国際協力スタッフ","翻訳通訳","事業開発","スタートアップ経営","カスタマーサクセス",
  "ライフコーチ","SNSインフルエンサー","YouTuber","Podcaster"
];

// ===== 仕事スコア（LP＋宿曜簡易） =====
function scoreJob(lp,sh,name){
  let s=0;
  if(lp===1&&/営業|経営|企画|挑戦|スタートアップ/.test(name))s+=3;
  if(lp===2&&/保育|介護|人事|調整|秘書/.test(name))s+=3;
  if(lp===3&&/デザ|クリエ|発信|表現|広告/.test(name))s+=3;
  if(lp===4&&/事務|経理|製造|建築|整備|公務/.test(name))s+=3;
  if(lp===5&&/旅行|営業|運輸|自由|広告|イベント/.test(name))s+=3;
  if(lp===6&&/看護|教師|ブライダル|インテリア|美容/.test(name))s+=3;
  if(lp===7&&/研究|技術|分析|プログラ|法律|心理/.test(name))s+=3;
  if(lp===8&&/経営|金融|不動産|交渉|管理|マネ/.test(name))s+=3;
  if(lp===9&&/福祉|心理|教育|芸術|社会/.test(name))s+=3;
  if(sh.includes("猿")||sh.includes("虎"))s+=2;
  if(sh.includes("狼")||sh.includes("兎"))s+=2;
  if(/医|看|介護/.test(name)&&sh.includes("狐"))s+=2;
  return s;
}

// ===== 宿曜×数秘の性格まとめ =====
function profileText(lp,sh){
  const base={
    1:"始まりを作るリーダー気質。直感で動き、自分で切り拓く勇気が強い。目標が明確なほど実力が発揮されます。",
    2:"人の気持ちを感じ取る感受性。人と人をつなぐ調整役として光ります。協調と安心感がテーマ。",
    3:"発想力と表現力が豊か。言葉・アート・会話で周囲を明るくする。退屈が苦手なので自由度が大切。",
    4:"コツコツ積み上げる堅実タイプ。仕組みを作り、信頼を守る役目。誠実さが最大の武器。",
    5:"変化を愛する自由人。旅・挑戦・刷新で人生を広げる。環境が変わるほど才能が花開く。",
    6:"愛情深く面倒見が良い。家族・職場など小さなコミュニティで調和を生む。",
    7:"探究心が強く、真実を追うタイプ。知識・研究・分析・精神性に惹かれる。",
    8:"結果を出す実行者。経営・お金・統率の分野で評価される。数字を味方にする人。",
    9:"感性が高く、人の痛みを理解する。奉仕・芸術・福祉で輝く。",
    11:"直感とインスピレーション。霊的な感受性が高く、人を導く役割。",
    22:"大きな夢を形にする現実的理想主義者。社会を動かすスケールで考える。",
    33:"無条件の愛を体現する癒やし人。芸術と奉仕を通じて多くを救う。"
  }[lp]||"";
  return `<p><strong>あなたの設計図：</strong><br>${base}<br><br>
  宿曜「${sh}」は、<strong>その気質をどんな場で発揮するか</strong>を示します。<br>
  あなたはこの宿の特徴である「柔軟な対応力」「会話で人を動かす力」「変化の中でこそ輝く性質」を持ちます。<br>
  周囲がざわつくときほど冷静さを保ち、“状況を読む直感”が冴えるタイプ。<br>
  同じ環境に長く留まるより、変化や新規がある場でエネルギーが増します。<br>
  対人面では、ストレートで裏表がない言葉が魅力となり、あなたの誠実さに惹かれる人が多いでしょう。<br>
  一方で感情を溜め込みやすい傾向もあるため、“素直に話す・聞いてもらう時間”が心の安定を作ります。</p>`;
}

// ===== 相性文生成 =====
function compatText(lpA,lpB,shA,shB){
  return `
  <h3>ふたりの取り扱い説明書</h3>
  <p><strong>関係の空気：</strong>似た者同士で深く分かり合える相性。似すぎるゆえに、張り合いやすい面も。<br>
  宿曜は「${shA}」×「${shB}」、数秘は ${lpA} と ${lpB}。<br>
  共通点が多く、考え方や感情の動きも似ています。そのため理解が早い半面、言葉がぶつかりやすい関係です。<br>
  相手を変えようとせず、“得意分野を任せる・苦手はお願いする”ルールで長続きします。<br>
  似ているほど譲り合いが大切。張り合うより、「一緒に育てる」意識を持つと関係が安定します。<br>
  会話は具体より感情ベースで伝えると、誤解が減ります。</p>

  <div class="box">
    <p><strong>愛情の伝え方：</strong>小さな日常の言葉や態度が一番響きます。感謝をその都度伝えると信頼が深まります。<br>
    <strong>喧嘩したとき：</strong>沈黙時間を5分と決めて、感情ではなく“何が不安だったか”を言葉にすると修復が早いです。<br>
    <strong>お金の扱い：</strong>どちらかが管理役を決め、月1で共有ミーティングを。曖昧にせずルール化が吉。<br>
    <strong>心の距離：</strong>常に一緒に居なくても安心できる“信頼の余白”を残すのが秘訣です。<br>
    <strong>生活の相性：</strong>静かな時間を共有できるカフェや自然のある場所が二人に調和をもたらします。</p>
  </div>`;
}

// ===== 鑑定実行 =====
document.getElementById("run").onclick=()=>{
  const d=document.getElementById("birth").value;
  if(!d){alert("生年月日を入力してください");return;}
  const date=new Date(d);
  const lp=lifePath(date.getFullYear(),date.getMonth()+1,date.getDate());
  const sh=SHUKU[shukuIdx(date)];

  const partner=document.getElementById("partner").value;
  let compatHTML="";
  if(partner){
    const dp=new Date(partner);
    const lpb=lifePath(dp.getFullYear(),dp.getMonth()+1,dp.getDate());
    const shb=SHUKU[shukuIdx(dp)];
    compatHTML=compatText(lp,lpb,sh,shb);
  }

  // 惹かれる人
  const attract=ATTRACTION_PATTERNS.sort(()=>Math.random()-0.5).slice(0,10)
    .map(a=>`<li>${a}</li>`).join("");

  // 職業抽出
  const jobs=JOBS_MASTER.map(n=>({n,sc:scoreJob(lp,sh,n)}))
    .sort((a,b)=>b.sc-a.sc||(Math.random()-0.5))
    .slice(0,8)
    .map(j=>`<li>${j.n}</li>`).join("");

  document.getElementById("result").innerHTML=`
  <div class="card">
    <h2>あなたの設計図（5分でわかる）</h2>
    ${profileText(lp,sh)}
  </div>
  <div class="card">
    <h2>惹かれやすい相手</h2>
    <ul class="clean">${attract}</ul>
  </div>
  <div class="card">
    <h2>向いている職業（宿曜＋数秘から）</h2>
    <ul class="clean">${jobs}</ul>
  </div>
  ${compatHTML}`;
};
</script>
</body>
</html>
